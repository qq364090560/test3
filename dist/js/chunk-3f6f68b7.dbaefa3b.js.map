{"version":3,"sources":["webpack:///./src/components/page/sys/role.vue?9ba8","webpack:///./src/components/page/sys/role.vue?d149","webpack:///src/components/page/sys/role.vue","webpack:///./src/components/page/sys/role.vue?9396","webpack:///./src/components/page/sys/role.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","_v","attrs","data","defaultProps","on","handleNodeClick","$event","dialogFormVisible","tags","rdelFlag","val","onDel","_s","changeFlag","model","value","callback","$$v","expression","_l","item","key","rid","roleName","_e","length","i","activeIndex","tagsHandle","ref","menuData","menuProps","menuHandle","isCheak","authority","mnameCn","clickChange","checkList","onSave","addForm","rules","$set","orgOptions","orgProps","orgHandle","slot","onClear","addRole","staticRenderFns","component"],"mappings":"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","file":"js/chunk-3f6f68b7.dbaefa3b.js","sourcesContent":["export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./role.vue?vue&type=style&index=0&id=1144dd24&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{staticClass:\"container\"},[_c('el-card',{staticClass:\"left-card\"},[_c('div',{staticClass:\"text item\"},[_c('el-row',[_c('el-col',[_c('h4',{staticStyle:{\"padding\":\"10px\"}},[_vm._v(\"组织列表\")])]),_c('el-col',[_c('el-tree',{attrs:{\"data\":_vm.data,\"props\":_vm.defaultProps},on:{\"node-click\":_vm.handleNodeClick}})],1)],1)],1)]),_c('el-card',{staticClass:\"right-card\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogFormVisible=true}}},[_vm._v(\"添加角色\")]),_c('el-card',{staticClass:\"rTopCard\"},[(_vm.tags.length)?_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"end\"}},[_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{attrs:{\"type\":_vm.rdelFlag?'danger' : 'primary',\"disabled\":!_vm.val?true:false},on:{\"click\":function($event){return _vm.onDel(_vm.val)}}},[_vm._v(_vm._s(_vm.rdelFlag ? '禁用角色' : '启用角色'))])],1),_c('el-col',{attrs:{\"span\":3}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":_vm.changeFlag},model:{value:(_vm.val),callback:function ($$v) {_vm.val=$$v},expression:\"val\"}},_vm._l((_vm.tags),function(item){return _c('el-option',{key:item.rid,attrs:{\"label\":item.roleName,\"value\":item.rid}})}),1)],1)],1):_vm._e(),(_vm.tags.length>0)?_c('div',[_c('el-row',_vm._l((_vm.tags),function(item,i){return _c('el-button',{key:i,attrs:{\"type\":_vm.activeIndex == i ? 'primary' : '',\"disabled\":item.rdelFlag? false : true},on:{\"click\":function($event){return _vm.tagsHandle(item.rid,i)}}},[_vm._v(_vm._s(item.roleName))])}),1)],1):_c('div',[_vm._v(\"数据为空\")])],1),_c('el-card',{staticClass:\"rBottomCard\"},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"tree\"},[_c('el-row',[_c('el-col',[_c('h4',{staticStyle:{\"padding\":\"10px\"}},[_vm._v(\"系统授权\")])]),_c('el-col',[_c('el-tree',{ref:\"tree\",staticStyle:{\"height\":\"50vh\",\"overflow\":\"auto\"},attrs:{\"data\":_vm.menuData,\"show-checkbox\":\"\",\"props\":_vm.menuProps,\"node-key\":\"mid\"},on:{\"node-click\":_vm.menuHandle,\"check\":_vm.isCheak}})],1)],1)],1),(_vm.authority)?_c('div',{staticClass:\"menuBox\"},[_c('div',{staticClass:\"center\"},[(_vm.authority.mfunction)?_c('div',{staticClass:\"center\"},[_c('h1',[_vm._v(_vm._s(_vm.authority.mnameCn + '权限'))]),_c('el-checkbox-group',{staticClass:\"menuCheckbox\",on:{\"change\":_vm.clickChange},model:{value:(_vm.checkList),callback:function ($$v) {_vm.checkList=$$v},expression:\"checkList\"}},[_c('el-checkbox',{attrs:{\"label\":\"query\"}},[_vm._v(\"查询\")]),_c('el-checkbox',{attrs:{\"label\":\"insert\"}},[_vm._v(\"添加\")]),_c('el-checkbox',{attrs:{\"label\":\"delete\"}},[_vm._v(\"删除\")]),_c('el-checkbox',{attrs:{\"label\":\"update\"}},[_vm._v(\"更新\")])],1)],1):_vm._e()])]):_vm._e()]),(_vm.authority)?_c('div',{staticClass:\"footBtn\"},[_c('el-button',{attrs:{\"id\":\"btn\",\"type\":\"primary\"},on:{\"click\":_vm.onSave}},[_vm._v(\"保存\")])],1):_vm._e()])],1),_c('el-dialog',{attrs:{\"title\":\"添加角色\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"addForm\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}},[_c('el-input',{model:{value:(_vm.addForm.roleName),callback:function ($$v) {_vm.$set(_vm.addForm, \"roleName\", $$v)},expression:\"addForm.roleName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"组织标识\",\"prop\":\"orgId\"}},[_c('el-cascader',{attrs:{\"options\":_vm.orgOptions,\"props\":_vm.orgProps,\"clearable\":\"\"},on:{\"change\":_vm.orgHandle}})],1),_c('el-form-item',{attrs:{\"label\":\"备注\",\"prop\":\"rRemark\"}},[_c('el-input',{model:{value:(_vm.addForm.rRemark),callback:function ($$v) {_vm.$set(_vm.addForm, \"rRemark\", $$v)},expression:\"addForm.rRemark\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.onClear}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addRole}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-container class=\"container\">\r\n    <el-card class=\"left-card\">\r\n      <div class=\"text item\">\r\n        <el-row>\r\n          <el-col>\r\n            <h4 style=\"padding:10px\">组织列表</h4>\r\n           \r\n          </el-col>\r\n          <el-col>\r\n            <el-tree :data=\"data\" :props=\"defaultProps\" @node-click=\"handleNodeClick\">\r\n            </el-tree>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </el-card>\r\n    <el-card class=\"right-card\">\r\n       <el-button type=\"primary\" @click=\"dialogFormVisible=true\">添加角色</el-button>\r\n      <el-card class=\"rTopCard\">\r\n        <el-row  type=\"flex\" justify=\"end\" v-if=\"tags.length\">\r\n          <el-col :span=\"2\">\r\n              <el-button :type=\"rdelFlag?'danger' : 'primary'\" @click=\"onDel(val)\" :disabled=\"!val?true:false\">{{rdelFlag ? '禁用角色' : '启用角色'}}</el-button>\r\n          </el-col>\r\n          <el-col :span=\"3\">\r\n            <el-select v-model=\"val\" placeholder=\"请选择\" @change=\"changeFlag\">\r\n              <el-option\r\n                v-for=\"item in tags\"\r\n                :key=\"item.rid\"\r\n                :label=\"item.roleName\"\r\n                :value=\"item.rid\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-col>\r\n        </el-row>\r\n        <div v-if=\"tags.length>0\">\r\n          <el-row>\r\n            <el-button\r\n               v-for=\"(item,i) in tags\" :key=\"i\" @click=\"tagsHandle(item.rid,i)\"\r\n             :type=\"activeIndex == i ? 'primary' : ''\" :disabled=\"item.rdelFlag? false : true\">{{item.roleName}}</el-button>\r\n          </el-row>\r\n        </div>\r\n        <div v-else>数据为空</div>\r\n      </el-card>\r\n      <el-card class=\"rBottomCard\">\r\n        <div class=\"flex\">\r\n          <div class=\"tree\">\r\n            <el-row>\r\n              <el-col>\r\n                <h4 style=\"padding:10px\">系统授权</h4>\r\n              </el-col>\r\n              <el-col>\r\n                <el-tree\r\n                  style=\"height:50vh;overflow:auto;\"\r\n                  :data=\"menuData\" \r\n                  show-checkbox \r\n                  ref=\"tree\"\r\n                  :props=\"menuProps\" \r\n                  node-key=\"mid\"\r\n                  @node-click=\"menuHandle\"\r\n                  @check=\"isCheak\">\r\n                </el-tree>\r\n              </el-col>\r\n            </el-row>\r\n          </div>\r\n          <div class=\"menuBox\" v-if=\"authority\">\r\n            <div class=\"center\">\r\n              <div class=\"center\" v-if=\"authority.mfunction\">\r\n                <h1>{{authority.mnameCn + '权限'}}</h1>\r\n                <el-checkbox-group class=\"menuCheckbox\" v-model=\"checkList\" @change=\"clickChange\">\r\n                  <el-checkbox label=\"query\">查询</el-checkbox>\r\n                  <el-checkbox label=\"insert\">添加</el-checkbox>\r\n                  <el-checkbox label=\"delete\">删除</el-checkbox>\r\n                  <el-checkbox label=\"update\">更新</el-checkbox>\r\n                </el-checkbox-group>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"footBtn\" v-if=\"authority\">\r\n          <el-button id=\"btn\" type=\"primary\" @click=\"onSave\">保存</el-button>\r\n        </div>\r\n      </el-card>\r\n    </el-card>\r\n\r\n    <el-dialog title=\"添加角色\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form ref=\"addForm\" :model=\"addForm\" :rules=\"rules\" label-width=\"120px\">\r\n          <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n              <el-input v-model=\"addForm.roleName\"></el-input>\r\n          </el-form-item>\r\n          <!-- <el-form-item label=\"组织id\" prop=\"orgId\">\r\n              <el-input v-model=\"addForm.orgId\"></el-input>\r\n          </el-form-item> -->\r\n          <el-form-item label=\"组织标识\" prop=\"orgId\">\r\n              <el-cascader\r\n                :options=\"orgOptions\"\r\n                :props=\"orgProps\"\r\n                @change=\"orgHandle\"\r\n                clearable>\r\n              </el-cascader>\r\n          </el-form-item>\r\n          <el-form-item label=\"备注\" prop=\"rRemark\">\r\n              <el-input v-model=\"addForm.rRemark\"></el-input>\r\n          </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"onClear\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addRole\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport {getOrgs,getRoles,addOneRole,updateOneRole,deleteOneRole,addMenusToRole,getMenusByRole,getAll} from '../../../api/api'\r\n\r\n  export default {\r\n    data(){\r\n      return{\r\n        activeIndex:-1,\r\n        val : '',\r\n        rdelFlag:1,\r\n        authority:'',\r\n        checkList:[],\r\n        rId:null,\r\n        // 弹窗\r\n        dialogFormVisible:false,\r\n        addForm:{},\r\n        rules:{\r\n          roleName:[{ required: true, message: '请输入角色名称', trigger: 'blur' }],\r\n          orgId:[{ required: true, message: '请选择组织', trigger: 'blur' }],\r\n          rRemark:[{ required: true, message: '请输入备份', trigger: 'blur'}],\r\n        },\r\n        orgProps:{\r\n          value:\"oid\",label:\"oname\",children:\"child\",checkStrictly: true, expandTrigger: 'hover' \r\n        },\r\n        orgOptions:[],\r\n        // 组织树\r\n        data:[],\r\n        defaultProps: {\r\n          children: \"child\",\r\n          label: \"oname\"\r\n        },\r\n        treeArr:[],\r\n        tags:[],\r\n        // 菜单树\r\n        menuData:[],\r\n        menuProps: {\r\n          children: \"childMenu\",\r\n          label: \"mnameCn\"\r\n        },\r\n        menuArr:[],\r\n        // menus:[]\r\n      }\r\n    },\r\n    methods:{\r\n      //开关\r\n      clickChange(v){\r\n        this.authority.mfunction=v.join(',')\r\n      },\r\n      changeFlag(v){\r\n        this.tags.map(it=>{\r\n          if(it.rid==v){\r\n            this.rdelFlag=it.rdelFlag\r\n          }\r\n        })\r\n        console.log(this.rdelFlag)\r\n\r\n      },\r\n      onDel(rId){\r\n        this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          setTimeout(()=>{\r\n\r\n            deleteOneRole({rId:rId,delFlag:!this.rdelFlag}).then(res=>{\r\n              this.$message({\r\n                type: 'success',\r\n                message: '成功'\r\n              });\r\n              getRoles({orgId:rId}).then(data=>{\r\n                this.tags=data.data\r\n              })\r\n            })\r\n          },10)\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消'\r\n          });           \r\n        });\r\n\r\n      },\r\n      onSave(){\r\n        let tree=this.$refs.tree.getCheckedNodes(false, true);\r\n        let treeChild=[]\r\n        tree.map(it=>{\r\n            let obj={menuId:it.mid,function:it.mfunction}\r\n            treeChild.push(obj)\r\n        })\r\n        let obj={\r\n          rId:this.rId,\r\n          menus:JSON.stringify(treeChild)\r\n        }\r\n        addMenusToRole(obj).then((res)=>{\r\n          if(res.status==200){\r\n            this.$message({\r\n              message: res.message,\r\n              type: 'success'\r\n            });\r\n          }else{\r\n            this.$message.error(res.message);\r\n          }\r\n        })\r\n        \r\n      },\r\n      onClear(){\r\n        this.addForm={}\r\n        this.dialogFormVisible=false;\r\n      },\r\n      addRole(){\r\n        this.$refs.addForm.validate(valid => {\r\n          if(valid){\r\n            addOneRole(this.addForm).then(res=>{\r\n              this.$message({\r\n                message: res.message,\r\n                type: 'success'\r\n              });\r\n              this.onClear()\r\n            })\r\n          }else{\r\n            return\r\n          }\r\n        })\r\n       \r\n      },\r\n      orgHandle(value){\r\n        this.addForm.orgId=value[value.length-1]\r\n      },\r\n      // tree事件\r\n      handleNodeClick(data) {\r\n        this.menuData=[]\r\n\r\n        getRoles({orgId:data.oid}).then(data=>{\r\n          this.tags=data.data\r\n        })\r\n      },\r\n      menuHandle(data) {\r\n        console.log(data)\r\n        this.authority=data\r\n        if(data.mfunction){\r\n          this.checkList=data.mfunction.split(',')\r\n        }\r\n      },\r\n      isCheak(data,node){\r\n        console.log(data,node)\r\n        this.menuArr=node.checkedNodes\r\n      },\r\n      // tag标签点击事件\r\n      tagsHandle(v,i){\r\n        this.activeIndex=i\r\n        this.rId=v\r\n        this.$axios.all([getAll(),getMenusByRole({rId:v})]).then(res=>{\r\n          this.menuData=res[0].data.menus\r\n          let res2=res[1].data\r\n          let arr=[]\r\n          let a=[]\r\n\r\n          res2.map(i=>{\r\n            this.menuData.map(item=> {\r\n              if(i.mId==item.mid){\r\n                arr.push(item)\r\n              }\r\n              item.childMenu.map(v=>{\r\n                if(v.mid==i.mId){\r\n                  arr.push(v)\r\n                }\r\n              })\r\n            })\r\n          })\r\n\r\n          arr.map(i=>{\r\n            if(i.childMenu==null){\r\n              a.push(i.mid)\r\n            }\r\n          })\r\n\r\n          this.$refs.tree.setCheckedKeys(a);\r\n        })\r\n\r\n      }\r\n    },\r\n    created(){\r\n      let obj={\r\n        userid:JSON.parse(sessionStorage.getItem('userInfo')).userId,\r\n        groupid:JSON.parse(sessionStorage.getItem('userInfo')).groupId\r\n      }\r\n      getOrgs(obj).then((data)=>{\r\n          this.data=data.data\r\n          this.orgOptions=data.data\r\n      })\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.container{\r\n  height: 100%;\r\n  padding: 10px;\r\n}\r\n.left-card{\r\n  width: 280px;\r\n}\r\n.right-card{\r\n  flex: 1;\r\n  margin-left: 10px;\r\n}\r\n.headbtn{\r\n  width: 100%;\r\n}\r\n.saveBtn{\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: flex-end;\r\n}\r\n.rTopCard{\r\n  margin-bottom: 20px;\r\n}\r\n.tagss{\r\n    font-size: 15px;\r\n    cursor: pointer;\r\n    margin:2px 5px;\r\n}\r\n.tagss.active { \r\n    background-color: #409eff;\r\n    color: #fff;\r\n}\r\n/* .disable{\r\n    background-color: red!important;\r\n    color:#fff;\r\n} */\r\n.rBottomCard{\r\n  height: 65vh;\r\n  position: relative;\r\n}\r\n.flex{\r\n  display: flex;\r\n  max-height:50vh ;\r\n}\r\n.menuBox{\r\n  margin-bottom: 20px;\r\n  overflow-y: auto;\r\n  height: 56vh;\r\n  width: 50%;\r\n}\r\n.el-switch{\r\n  margin: 30px  0;\r\n}\r\n.center{\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.menuCheckbox{\r\n  margin-top: 20px;\r\n}\r\n.tree{\r\n  height: 50vh;\r\n}\r\n.footBtn{\r\n  display: flex;\r\n  align-items: flex-end;\r\n  justify-content: space-between;\r\n  position: relative;\r\n}\r\n#btn{\r\n  position: absolute;\r\n  bottom: 20;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./role.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./role.vue?vue&type=template&id=1144dd24&scoped=true&\"\nimport script from \"./role.vue?vue&type=script&lang=js&\"\nexport * from \"./role.vue?vue&type=script&lang=js&\"\nimport style0 from \"./role.vue?vue&type=style&index=0&id=1144dd24&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1144dd24\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}