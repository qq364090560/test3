{"version":3,"sources":["webpack:///./src/components/page/program/fee.vue?2183","webpack:///src/components/page/program/fee.vue","webpack:///./src/components/page/program/fee.vue?fc38","webpack:///./src/components/page/program/fee.vue","webpack:///./src/components/page/program/fee.vue?407d"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","on","$event","dialogAdd","_v","staticClass","_l","it","index","key","doorController","style","status","_s","snName","dialog","form","model","value","callback","$$v","$set","expression","slot","openDoor","doorStatus","label","doorChange","onSave","addFrom","onAdd","ref","tableData","background","color","handleCurrentChange","class","socketStatusClass","socketStatus","length","staticRenderFns","component"],"mappings":"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","file":"js/chunk-493ed880.bf369fa4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"height\":\"400px\"}},[_c('div',{staticStyle:{\"background\":\"#fff\",\"margin-bottom\":\"20px\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.dialogAdd=true}}},[_vm._v(\"添加控制器\")])],1),_c('div',{staticClass:\"door\"},[_c('ul',{staticClass:\"ul-div\"},_vm._l((_vm.data),function(it,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.doorController(it)}}},[_c('span',{staticClass:\"icon-door icon-font\",style:(it.status=='在线' ? 'color:#15B513' : 'color:red')}),_c('span',[_vm._v(_vm._s(it.snName))])])}),0)])]),_c('el-dialog',{attrs:{\"title\":\"控制器\",\"visible\":_vm.dialog,\"show-close\":false,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.dialog=$event}}},[_c('el-form',{attrs:{\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"sn\",\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.sn),callback:function ($$v) {_vm.$set(_vm.form, \"sn\", $$v)},expression:\"form.sn\"}})],1),_c('el-form-item',{attrs:{\"label\":\"名称\",\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.snName),callback:function ($$v) {_vm.$set(_vm.form, \"snName\", $$v)},expression:\"form.snName\"}}),_vm._v(\"\\n          控制器名称说明：控制器名称结构为门名称；若控制器多个IO输出，应使用英文分号（\\\";\\\"）分隔。\"),_c('br'),_vm._v(\"\\n          例如：“一号门;二号门;三号门;四号门”。注：不能以英文分号（\\\";\\\"）为结尾。\\n        \")],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-form',{attrs:{\"model\":_vm.form,\"inline\":true}},[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-around\"}},[_c('div',[_c('el-form-item',{attrs:{\"label\":\"选择门\",\"label-width\":\"80px\"}},[_c('el-select',{attrs:{\"placeholder\":\"请先选择开门选项再点击远程开门\"},model:{value:(_vm.form.index),callback:function ($$v) {_vm.$set(_vm.form, \"index\", $$v)},expression:\"form.index\"}},_vm._l((_vm.form.snName1),function(it,index){return _c('el-option',{key:index + 'a',attrs:{\"label\":it,\"value\":index}})}),1)],1),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.openDoor}},[_vm._v(\"远程开门\")])],1),_c('div',[_c('el-form-item',{attrs:{\"label\":\"状态\",\"label-width\":\"80px\"}},[_c('el-select',{attrs:{\"placeholder\":\"请先选择门再选择状态\"},model:{value:(_vm.doorStatus),callback:function ($$v) {_vm.doorStatus=$$v},expression:\"doorStatus\"}},_vm._l((_vm.doorStatusArr),function(it,index){return _c('el-option',{key:index + 'b',attrs:{\"label\":it.label,\"value\":it.value}})}),1)],1),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.doorChange()}}},[_vm._v(\"保存状态\")])],1)]),_c('div',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSave}},[_vm._v(\"保 存\")]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"关 闭\")])],1)])],1)],1),_c('el-dialog',{attrs:{\"title\":\"添加控制器\",\"visible\":_vm.dialogAdd,\"show-close\":false,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.dialogAdd=$event}}},[_c('el-form',{attrs:{\"model\":_vm.addFrom}},[_c('el-form-item',{attrs:{\"label\":\"sn\",\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.addFrom.sn),callback:function ($$v) {_vm.$set(_vm.addFrom, \"sn\", $$v)},expression:\"addFrom.sn\"}})],1),_c('el-form-item',{attrs:{\"label\":\"名称\",\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.addFrom.snName),callback:function ($$v) {_vm.$set(_vm.addFrom, \"snName\", $$v)},expression:\"addFrom.snName\"}}),_vm._v(\"\\n          控制器名称说明：控制器名称结构为门名称；若控制器多个IO输出，应使用英文分号（\\\";\\\"）分隔。\"),_c('br'),_vm._v(\"\\n          例如：“一号门;二号门;三号门;四号门”。注：不能以英文分号（\\\";\\\"）为结尾。\\n        \")],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onAdd}},[_vm._v(\"添 加\")]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){_vm.dialogAdd = false}}},[_vm._v(\"关 闭\")])],1)],1),_c('el-container',{staticStyle:{\"margin-top\":\"40px\"}},[[_c('el-table',{ref:\"singleTable\",attrs:{\"data\":_vm.tableData,\"highlight-current-row\":\"\",\"header-cell-style\":{ background: '#409EFF', color: '#fff' },\"height\":\"40vh\"},on:{\"current-change\":_vm.handleCurrentChange}},[_c('el-table-column',{class:[_vm.socketStatusClass ? 'success' : 'error'],attrs:{\"label\":_vm.socketStatus + ' | ' + _vm.tableData.length + '条'}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"property\":\"dateTime\",\"label\":\"日期\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"property\":\"name\",\"label\":\"小区\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"property\":\"detail\",\"label\":\"信息\"}})],1)],1)]],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n      <div style=\"height: 400px;\">\r\n        <div style=\"background:#fff; margin-bottom: 20px\">\r\n          <el-button type=\"primary\" plain @click=\"dialogAdd=true\">添加控制器</el-button>\r\n          <!-- <el-button type=\"primary\" plain>添加控制器</el-button> -->\r\n        </div>\r\n        <div class=\"door\">\r\n          <ul class=\"ul-div\">\r\n            <li v-for=\"(it,index) in data\" :key=\"index\" @click=\"doorController(it)\">\r\n              <span class=\"icon-door icon-font\" :style=\"it.status=='在线' ? 'color:#15B513' : 'color:red'\"></span>\r\n              <span>{{it.snName}}</span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <el-dialog title=\"控制器\" :visible.sync=\"dialog\" :show-close='false' :close-on-click-modal='false'>\r\n        <el-form :model=\"form\">\r\n          <el-form-item label=\"sn\" label-width=\"120px\">\r\n            <el-input v-model=\"form.sn\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"名称\" label-width=\"120px\">\r\n            <el-input v-model=\"form.snName\" autocomplete=\"off\"></el-input>\r\n            控制器名称说明：控制器名称结构为门名称；若控制器多个IO输出，应使用英文分号（\";\"）分隔。<br/>\r\n            例如：“一号门;二号门;三号门;四号门”。注：不能以英文分号（\";\"）为结尾。\r\n          </el-form-item>\r\n          <!-- <el-form-item label=\"选择门\" label-width=\"120px\">\r\n            <el-select v-model=\"form.index\" placeholder=\"请选择开门选项\">\r\n              <el-option v-for=\"(it,index) in form.snName1\" :key=\"index + 'a'\"  :label=\"it\" :value=\"index\"></el-option>\r\n            </el-select>\r\n          </el-form-item> -->\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-form :model=\"form\" style=\"\" :inline=\"true\">\r\n            <div style=\"display:flex;justify-content: space-around;\">\r\n              <div>\r\n                <el-form-item label=\"选择门\" label-width=\"80px\">\r\n                  <el-select v-model=\"form.index\" placeholder=\"请先选择开门选项再点击远程开门\">\r\n                    <el-option v-for=\"(it,index) in form.snName1\" :key=\"index + 'a'\"  :label=\"it\" :value=\"index\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-button type=\"primary\" @click=\"openDoor\">远程开门</el-button>\r\n              </div>\r\n              <div>\r\n                <el-form-item label=\"状态\" label-width=\"80px\">\r\n                  <el-select v-model=\"doorStatus\" placeholder=\"请先选择门再选择状态\">\r\n                    <el-option v-for=\"(it,index) in doorStatusArr\" :key=\"index + 'b'\"  :label=\"it.label\" :value=\"it.value\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-button type=\"primary\" @click=\"doorChange()\">保存状态</el-button>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <el-button type=\"primary\" @click=\"onSave\">保 存</el-button>\r\n              <el-button type=\"danger\" @click=\"dialog = false\">关 闭</el-button>\r\n            </div>\r\n          </el-form>\r\n        </div>\r\n      </el-dialog>\r\n      \r\n      <!-- <el-dialog title=\"保存\" :visible.sync=\"dialogSave\" :show-close='false' :close-on-click-modal='false'>\r\n        <el-form :model=\"saveForm\">\r\n          <el-form-item label=\"sn\" label-width=\"120px\">\r\n            <el-input v-model=\"saveForm.sn\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"名称\" label-width=\"120px\">\r\n            <el-input v-model=\"saveForm.snName\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button type=\"primary\" @click=\"onSave\">保 存</el-button>\r\n          <el-button type=\"danger\" @click=\"dialogSave = false\">关 闭</el-button>\r\n        </div>\r\n      </el-dialog> -->\r\n\r\n      <el-dialog title=\"添加控制器\" :visible.sync=\"dialogAdd\" :show-close='false' :close-on-click-modal='false'>\r\n        <el-form :model=\"addFrom\">\r\n          <el-form-item label=\"sn\" label-width=\"120px\">\r\n            <el-input v-model=\"addFrom.sn\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"名称\" label-width=\"120px\">\r\n            <el-input v-model=\"addFrom.snName\" autocomplete=\"off\"></el-input>\r\n            控制器名称说明：控制器名称结构为门名称；若控制器多个IO输出，应使用英文分号（\";\"）分隔。<br/>\r\n            例如：“一号门;二号门;三号门;四号门”。注：不能以英文分号（\";\"）为结尾。\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button type=\"primary\" @click=\"onAdd\">添 加</el-button>\r\n          <el-button type=\"danger\" @click=\"dialogAdd = false\">关 闭</el-button>\r\n        </div>\r\n      </el-dialog>\r\n\r\n      <el-container style=\"margin-top: 40px \">\r\n        <template>\r\n          <el-table\r\n            ref=\"singleTable\"\r\n            :data=\"tableData\"\r\n            highlight-current-row\r\n            @current-change=\"handleCurrentChange\"\r\n            :header-cell-style=\"{ background: '#409EFF', color: '#fff' }\"\r\n            height=\"40vh\"\r\n            >\r\n            <el-table-column :label=\"socketStatus + ' | ' + tableData.length + '条'\"  :class=\"[socketStatusClass ? 'success' : 'error']\">\r\n              <el-table-column\r\n                type=\"index\"\r\n                label=\"序号\"\r\n                width=\"50\">\r\n              </el-table-column>\r\n              <el-table-column\r\n                property=\"dateTime\"\r\n                label=\"日期\"\r\n                width=\"120\">\r\n              </el-table-column>\r\n              <el-table-column\r\n                property=\"name\"\r\n                label=\"小区\"\r\n                width=\"120\">\r\n              </el-table-column>\r\n              <el-table-column\r\n                property=\"detail\"\r\n                label=\"信息\">\r\n              </el-table-column>\r\n            </el-table-column>\r\n          </el-table>\r\n          \r\n        </template>\r\n        \r\n      </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {handOpen,setControllerStatus,updateController,addController} from '../../../api/api'\r\n  export default {\r\n    data(){\r\n      return{\r\n        data:[],\r\n        tableData: [],\r\n\r\n        dialog:false,\r\n        form:{},\r\n        doorStatusArr:[\r\n          {value:1,label:\"常开\"},\r\n          {value:2,label:\"常闭\"},\r\n          {value:3,label:\"在线控制\"},\r\n        ],\r\n        doorStatus:'',\r\n\r\n        dialogSave:false,\r\n        saveForm:{},\r\n\r\n        dialogAdd:false,\r\n        addFrom:{},\r\n\r\n        webSocket:null,\r\n        doorWebSocket:null,\r\n        socketStatus: '正在连接..',\r\n        socketStatusClass: true\r\n      }\r\n    },\r\n    created(){\r\n      this.createWt()\r\n      let ws=JSON.parse(sessionStorage.getItem('ws'))\r\n      if(ws){\r\n        this.tableData=ws\r\n      }\r\n\r\n    },\r\n    mounted(){\r\n        window.addEventListener('beforeunload', this.closeWebSocket);\r\n    },\r\n    beforeDestroy(){\r\n      if(this.tableData.length>100){\r\n        this.tableData=[];\r\n        // this.tableData.splice(0,49)\r\n      }\r\n      sessionStorage.setItem('ws',JSON.stringify(this.tableData))\r\n    },\r\n    destroyed() {\r\n        // this.closeWebSocket();\r\n        // window.removeEventListener('beforeunload', this.closeWebSocket);\r\n        // window.onbeforeunload = function (e) {\r\n        //     var message = 'some word';\r\n        //     e = e || window.event;\r\n\r\n        //     if (e) {\r\n        //         e.returnValue = message;\r\n        //     }\r\n\r\n        //     return message;\r\n        // };\r\n    },\r\n    watch:{\r\n      tableData(val,old){\r\n        if(val.length>100){\r\n          this.tableData=[]\r\n          // this.tableData.splice(0,49)\r\n        }\r\n      }\r\n    },\r\n    methods:{\r\n      // 添加\r\n      onAdd(){\r\n        let obj={\r\n          wgSn:this.addFrom.sn,\r\n          wgName:this.addFrom.snName\r\n        }\r\n        addController(obj).then(res=>{\r\n          if(res.status==='200'){\r\n            this.$message({\r\n              message: res.message,\r\n              type: 'success'\r\n            });\r\n          }\r\n          this.dialogAdd=false;\r\n        })\r\n      },\r\n      // 修改\r\n      onSave(){\r\n        let obj={\r\n          wgSn:this.form.sn,\r\n          wgName:this.form.snName\r\n        }\r\n        updateController(obj).then(res=>{\r\n          if(res.status==='200'){\r\n            this.$message({\r\n              message: res.message,\r\n              type: 'success'\r\n            });\r\n            this.dialog=false;\r\n            this.createWt()\r\n          }\r\n        })\r\n      },\r\n      createWt(){\r\n        if (!window.WebSocket) {\r\n            alert('您的浏览器不支持WebSocket，请使用其他浏览器，例如谷歌浏览器');\r\n            return;\r\n        }\r\n        // 获取刷卡动态\r\n        var url=\"ws://plat.hlyzycn.com/hardware/passInfo/hly\"\r\n        this.websocket = new WebSocket(url);\r\n\r\n        this.websocket.onopen = this.onOpen;\r\n        this.websocket.onmessage = this.onMessage;\r\n        this.websocket.onclose = this.onClose;\r\n        // 监听控制器状态\r\n        var burl=\"ws://plat.hlyzycn.com/hardware/socket/{}\"\r\n        this.doorWebSocket = new WebSocket(burl);\r\n\r\n        this.doorWebSocket.onopen = this.onDoorOpen;\r\n        this.doorWebSocket.onmessage = this.onDoorMessage;\r\n        this.doorWebSocket.onclose = this.onDoorClose;\r\n      },\r\n      onOpen(event) {\r\n          // console.log('websocket open')\r\n          this.socketStatusClass = true;\r\n      },\r\n      //刷卡动态\r\n      onMessage({ data }) {\r\n          try {\r\n              let row = JSON.parse(data);\r\n              let keys = Object.keys(row);\r\n              let len = keys.length;\r\n              // 如果对象为空，或者只有一个属性并且属性的值为空，跳过\r\n              if (!len || (len === 1 && !row[keys[0]])) {\r\n                  return;\r\n              }\r\n              this.tableData.push(row);\r\n              this.socketStatusClass = true;\r\n          } catch(err) {\r\n              // this.tableData=[];\r\n              this.socketStatus = data;\r\n              if (data === '实时通讯已连接') {\r\n                  return;\r\n              }\r\n              this.socketStatusClass = false;\r\n          }\r\n      },\r\n      closeWebSocket() {\r\n          if (this.websocket) {\r\n              this.websocket.close();\r\n              this.websocket = null;\r\n              // console.log('WebSocket closed.');\r\n          }\r\n      },\r\n\r\n      \r\n      \r\n      tableRowClassName({row, rowIndex}) {\r\n          const { tips } = row;\r\n          console.log(tips)\r\n          // if (tips?.trim() === '刷卡开门') {\r\n          //     return 'success-row';\r\n          // } else {\r\n          //     return 'warning-row';\r\n          // }\r\n      },\r\n\r\n      onClose() {\r\n          // console.log('websocket close');\r\n          this.socketStatusClass = false;\r\n      },\r\n\r\n      // 控制器\r\n      onDoorOpen(event) {\r\n          // console.log('websocket open')\r\n          this.socketStatusClass = true;\r\n      },\r\n      onDoorMessage({ data }) {\r\n          try {\r\n              let row = JSON.parse(data);\r\n              let keys = Object.keys(row);\r\n              let len = keys.length;\r\n              // 如果对象为空，或者只有一个属性并且属性的值为空，跳过\r\n              if (!len || (len === 1 && !row[keys[0]])) {\r\n                  return;\r\n              }\r\n              this.data=row;\r\n              // console.log(this.data)\r\n              this.socketStatusClass = true;\r\n          } catch(err) {\r\n              // this.tableData = []\r\n              this.socketStatus = data;\r\n              if (data === '实时通讯已连接') {\r\n                  return;\r\n              }\r\n              this.socketStatusClass = false;\r\n          }\r\n      },\r\n      closeDoorWebSocket() {\r\n          if (this.doorWebSocket) {\r\n              this.doorWebSocket.close();\r\n              this.doorWebSocket = null;\r\n              // console.log('WebSocket closed.');\r\n          }\r\n      },\r\n      onDoorClose() {\r\n          // console.log('websocket close');\r\n          this.socketStatusClass = false;\r\n      },\r\n\r\n      doorController(v){\r\n        this.dialog=true;\r\n        v.snName1=v.snName.split(';')\r\n        console.log(v)\r\n        this.form=v\r\n      },\r\n      handleCurrentChange(v){\r\n        console.log(v)\r\n      },\r\n      //远程开门\r\n      openDoor(){\r\n        if(!this.form){\r\n          return\r\n        }else{\r\n          let parmas={\r\n            userId:JSON.parse(sessionStorage.getItem('userInfo')).userId,\r\n            sn:this.form.sn,\r\n            door:this.form.index+1,\r\n          }\r\n          handOpen(parmas).then(res=>{\r\n            if(res){\r\n              this.$message({\r\n                message: '开门成功',\r\n                type: 'success'\r\n              });\r\n            }\r\n          })\r\n        }\r\n      },\r\n      doorChange(){\r\n        if(!this.doorStatus){\r\n          return\r\n        }else{\r\n          let parmas={\r\n            sn:this.form.sn,\r\n            door:this.form.index+1,\r\n            status:this.doorStatus,\r\n          }\r\n          console.log(this.form)\r\n          setControllerStatus(parmas).then(res=>{\r\n            if(res.status==200){\r\n              this.$message({\r\n                message: '成功',\r\n                type: 'success'\r\n              });\r\n            }else{\r\n              this.$message.error(res.message);\r\n            }\r\n          })\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.door{\r\n  \r\n}\r\n.ul-div{\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap:wrap;\r\n}\r\n.ul-div >li{\r\n  width: 10%;\r\n  height: 120px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n\r\n}\r\n/*  表格行:hover样式 */\r\n\r\n.el-table--enable-row-hover .el-table__body tr:hover>td {\r\n    background-color: skyblue;\r\n}\r\n.el-table .warning-row {\r\n    background-color: rgb(240, 152, 157);\r\n}\r\n.el-table .success-row {\r\n    background-color: #89f1a3;\r\n}\r\n.icon-font{\r\n  font-size: 40px;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./fee.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./fee.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fee.vue?vue&type=template&id=3d9360bc&scoped=true&\"\nimport script from \"./fee.vue?vue&type=script&lang=js&\"\nexport * from \"./fee.vue?vue&type=script&lang=js&\"\nimport style0 from \"./fee.vue?vue&type=style&index=0&id=3d9360bc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d9360bc\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./fee.vue?vue&type=style&index=0&id=3d9360bc&scoped=true&lang=css&\""],"sourceRoot":""}