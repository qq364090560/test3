(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a0fa6a2"],{"14ea":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{staticClass:"container"},[o("el-dialog",{attrs:{title:"添加组织",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"父级组织",prop:"pid"}},[o("el-cascader",{attrs:{options:e.pidOptions,props:e.props1,clearable:""},on:{change:e.handlePid}})],1),o("el-form-item",{attrs:{label:"组织名称",prop:"oName"}},[o("el-input",{model:{value:e.addForm.oName,callback:function(t){e.$set(e.addForm,"oName",t)},expression:"addForm.oName"}})],1),o("el-form-item",{attrs:{label:"备注",prop:"remark"}},[o("el-input",{model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.onClear}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.onAdd}},[e._v("确 定")])],1)],1),o("el-card",{staticClass:"left-card"},[o("div",{staticClass:"text item"},[o("el-row",[o("el-col",[o("el-row",[o("el-col",{staticStyle:{padding:"0 5px"},attrs:{span:12}},[o("el-button",{staticClass:"headbtn",attrs:{type:"primary"},on:{click:e.onShow}},[e._v("添加")])],1),o("el-col",{staticStyle:{padding:"0 5px"},attrs:{span:12}},[o("el-button",{staticClass:"headbtn",attrs:{type:"danger"},on:{click:e.onDel}},[e._v("删除所选")])],1)],1),o("h4",{staticStyle:{padding:"10px"}},[e._v("组织管理")])],1),o("el-col",[o("el-tree",{attrs:{data:e.data,"show-checkbox":"",props:e.defaultProps},on:{"node-click":e.handleNodeClick,check:e.isCheak}})],1)],1)],1)]),o("el-card",{staticClass:"right-card"},[e.formShow?o("div",{staticClass:"text item"},[o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"父级组织",prop:"pid"}},[o("el-cascader",{attrs:{placeholder:e.optionValue,options:e.options,props:e.props,clearable:""},on:{change:e.handleChange}})],1),o("el-form-item",{attrs:{label:"组织名称",prop:"oname"}},[o("el-input",{model:{value:e.form.oname,callback:function(t){e.$set(e.form,"oname",t)},expression:"form.oname"}})],1),o("el-form-item",{attrs:{label:"备注",prop:"oremark"}},[o("el-input",{model:{value:e.form.oremark,callback:function(t){e.$set(e.form,"oremark",t)},expression:"form.oremark"}})],1),o("el-form-item",{attrs:{label:"时间"}},[o("el-input",{attrs:{readonly:""},model:{value:e.form.ocreateTime,callback:function(t){e.$set(e.form,"ocreateTime",t)},expression:"form.ocreateTime"}})],1),o("div",{staticClass:"saveBtn"},[o("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")])],1)],1)],1):o("div",[e._v("请选择左边树")])])],1)},r=[],s=(o("566e"),o("4ec3")),i={data:function(){return{data:[],defaultProps:{children:"child",label:"oname"},formShow:!1,form:{},rules:{pid:[{required:!0,message:"请选择父级组织",trigger:"blur"}],oname:[{required:!0,message:"请输入父级名称",trigger:"blur"}],oremark:[{required:!0,message:"请输入备份",trigger:"blur"}]},props:{value:"oid",label:"oname",children:"child",checkStrictly:!0,expandTrigger:"hover"},props1:{value:"oid",label:"oname",children:"child",checkStrictly:!0,expandTrigger:"hover"},pidOptions:[],options:[],optionValue:null,dialogFormVisible:!1,addForm:{},treeArr:[]}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={userid:JSON.parse(sessionStorage.getItem("userInfo")).userId,groupid:JSON.parse(sessionStorage.getItem("userInfo")).groupId};Object(s["J"])(t).then((function(t){var o=t.data;e.data=o,e.data.map((function(e){e.child&&e.child.map((function(t){t.oparentId==e.orgId&&(t.PName=e.orgName)}))})),e.options=o,e.pidOptions=o}))},handlePid:function(e){this.addForm.pid=e[e.length-1]},handleChange:function(e){console.log(e),this.form.pid=e[e.length-1]},onClear:function(){this.addForm={},this.dialogFormVisible=!1},onAdd:function(){var e=this;this.$refs.addForm.validate((function(t){if(!t)return alert("error submit!!"),!1;Object(s["f"])(e.addForm).then((function(t){e.$message({message:t.message,type:"success"}),e.getData(),e.addForm={},e.$refs.addForm.resetFields(),e.dialogFormVisible=!1}))}))},isCheak:function(e,t){var o=this;t.checkedNodes.map((function(e){o.treeArr.push(e.oid)})),console.log(e,t)},onShow:function(){this.dialogFormVisible=!0},onDel:function(){var e=this,t={oId:this.treeArr.join()};Object(s["s"])(t).then((function(t){e.getData(),e.$message({message:t.message,type:"success"})}))},onSave:function(){var e=this;console.log(this.form),this.$refs.form.validate((function(t){if(t){var o={pid:e.form.pid,oid:e.form.oid,oName:e.form.oname,remark:e.form.oremark};Object(s["kb"])(o).then((function(t){t.status?e.$message({message:t.message,type:"success"}):e.$message.error(t.message)}))}}))},handleNodeClick:function(e){this.formShow=!0,this.form=e,console.log(e)}}},l=i,n=(o("dab5"),o("cba8")),d=Object(n["a"])(l,a,r,!1,null,"40075856",null);t["default"]=d.exports},"5f26":function(e,t,o){},dab5:function(e,t,o){"use strict";o("5f26")}}]);
//# sourceMappingURL=chunk-5a0fa6a2.a63045d8.js.map