(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3badc866"],{"13e4":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-container",{staticClass:"container"},[t("el-dialog",{attrs:{title:"添加组织",visible:e.dialogFormVisible},on:{"update:visible":function(r){e.dialogFormVisible=r}}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"父级标识",prop:"ugParentGroupId"}},[t("el-cascader",{attrs:{options:e.pidOptions,props:e.props1,clearable:""},on:{change:e.handlePid}})],1),t("el-form-item",{attrs:{label:"用户组名称",prop:"ugName"}},[t("el-input",{model:{value:e.addForm.ugName,callback:function(r){e.$set(e.addForm,"ugName",r)},expression:"addForm.ugName"}})],1),t("el-form-item",{attrs:{label:"组织标识",prop:"ugOrgId"}},[t("el-cascader",{attrs:{options:e.ugOptions,props:e.ugProps,clearable:""},on:{change:e.ugHandle}})],1),t("el-form-item",{attrs:{label:"备注",prop:"ugRemark"}},[t("el-input",{model:{value:e.addForm.ugRemark,callback:function(r){e.$set(e.addForm,"ugRemark",r)},expression:"addForm.ugRemark"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.onClear}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.onAdd}},[e._v("确 定")])],1)],1),t("el-card",{staticClass:"left-card"},[t("div",{staticClass:"text item"},[t("el-row",[t("el-col",[t("el-row",[t("el-col",{staticStyle:{padding:"0 5px"},attrs:{span:12}},[t("el-button",{directives:[{name:"btnShow",rawName:"v-btnShow",value:"insert",expression:"'insert'"}],staticClass:"headbtn",attrs:{type:"primary"},on:{click:e.onShow}},[e._v("添加")])],1),t("el-col",{staticStyle:{padding:"0 5px"},attrs:{span:12}},[t("el-button",{directives:[{name:"btnShow",rawName:"v-btnShow",value:"delete",expression:"'delete'"}],staticClass:"headbtn",attrs:{type:"danger"},on:{click:e.onDel}},[e._v("删除所选")])],1)],1),t("h4",{staticStyle:{padding:"10px"}},[e._v("用户组管理")])],1),t("el-col",[t("el-tree",{attrs:{data:e.data,"show-checkbox":"",props:e.defaultProps},on:{"node-click":e.handleNodeClick,check:e.isCheak}})],1)],1)],1)]),t("el-card",{staticClass:"right-card"},[e.form?t("div",{staticClass:"text item"},[e.formShow?t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"用户组名称",prop:"ugName"}},[t("el-input",{model:{value:e.form.ugName,callback:function(r){e.$set(e.form,"ugName",r)},expression:"form.ugName"}})],1),t("el-form-item",{attrs:{label:"组织id",prop:"ugOrgId"}},[t("el-cascader",{attrs:{options:e.orgOptions,props:e.orgProps,clearable:""},on:{change:e.orgHandle}})],1),t("el-form-item",{attrs:{label:"父级标识",prop:"ugParentGroupId"}},[t("el-input",{model:{value:e.form.ugParentGroupId,callback:function(r){e.$set(e.form,"ugParentGroupId",r)},expression:"form.ugParentGroupId"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"ugRemark"}},[t("el-input",{model:{value:e.form.ugRemark,callback:function(r){e.$set(e.form,"ugRemark",r)},expression:"form.ugRemark"}})],1),t("el-form-item",{attrs:{label:"创建时间"}},[t("el-input",{attrs:{value:e.form.ugCreateTime,readonly:""}})],1),t("el-form-item",[t("el-button",{directives:[{name:"btnShow",rawName:"v-btnShow",value:"update",expression:"'update'"}],attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")])],1)],1):t("div",[e._v("请选择左边树")])],1):e._e()])],1)},o=[];function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function i(e){if(Array.isArray(e))return n(e)}function s(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function l(e,r){if(e){if("string"===typeof e)return n(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,r):void 0}}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e){return i(e)||s(e)||l(e)||u()}t("1bc7"),t("0c84"),t("c5cb"),t("566e");var c=t("4ec3"),m={data:function(){return{data:[],defaultProps:{children:"child",label:"ugName"},formShow:!1,form:{},rules:{ugName:[{required:!0,message:"请选择父级组织",trigger:"blur"}],ugOrgId:[{required:!0,message:"请输入父级名称",trigger:"blur"}],ugParentGroupId:[{required:!0,message:"请输入备份",trigger:"blur"}],ugRemark:[{required:!0,message:"请输入备份",trigger:"blur"}]},props:{value:"oid",label:"oname",children:"child",checkStrictly:!0,expandTrigger:"hover"},props1:{value:"ugId",label:"ugName",children:"child",checkStrictly:!0,expandTrigger:"hover"},ugProps:{value:"oid",label:"oname",children:"child",checkStrictly:!0,expandTrigger:"hover"},orgProps:{value:"oid",label:"oname",children:"child",checkStrictly:!0,expandTrigger:"hover"},orgOptions:[],ugOptions:[],pidOptions:[],options:[],optionValue:null,dialogFormVisible:!1,addForm:{},treeArr:[]}},created:function(){this.getData()},methods:{getData:function(){var e=this,r={groupId:JSON.parse(sessionStorage.getItem("userInfo")).groupId};Object(c["H"])(r).then((function(r){var t=r.data;e.data=t,e.data.map((function(e){}));var a={userid:JSON.parse(sessionStorage.getItem("userInfo")).userId,groupid:JSON.parse(sessionStorage.getItem("userInfo")).groupId};Object(c["J"])(a).then((function(r){e.ugOptions=r.data,e.orgOptions=r.data})),e.options=t,e.pidOptions=t}))},ugHandle:function(e){this.addForm.ugOrgId=e[e.length-1]},orgHandle:function(e){this.form.ugOrgId=e[e.length-1]},handlePid:function(e){this.addForm.ugParentGroupId=e[e.length-1]},handleChange:function(e){console.log(e),this.form.pid=e[e.length-1]},onClear:function(){this.addForm={},this.dialogFormVisible=!1},onAdd:function(){var e=this;this.$refs.addForm.validate((function(r){if(!r)return alert("error submit!!"),!1;Object(c["e"])(e.addForm).then((function(r){e.$message({message:r.message,type:"success"}),e.getData(),e.addForm={},e.$refs.addForm.resetFields(),e.dialogFormVisible=!1}))}))},isCheak:function(e,r){var t=this;r.checkedNodes.map((function(e){t.treeArr.push(e.ugId)}));var a=new Set(d(this.treeArr));this.treeArr=d(a)},onShow:function(){this.dialogFormVisible=!0},onDel:function(){var e=this,r={ugId:this.treeArr.join()};Object(c["p"])(r).then((function(r){e.getData(),e.$message({message:r.message,type:"success"})}))},onSave:function(){var e=this;this.$refs.form.validate((function(r){if(r){var t={ugParentGroupId:e.form.ugParentGroupId,ugName:e.form.ugName,ugOrgId:e.form.ugOrgId,ugRemark:e.form.ugRemark,ugId:e.form.ugId};Object(c["jb"])(t).then((function(r){r.status?e.$message({message:r.message,type:"success"}):e.$message.error(r.message)}))}}))},handleNodeClick:function(e){this.formShow=!0;var r=this.$common.deepClone(e);this.form=r,this.ugOptions.map((function(r){r.oid==e.ugOrgId?r.orgName=r.oname:r.child.map((function(r){r.oid==e.ugOrgId&&(r.orgName=r.oname)}))})),console.log(this.ugOptions)}}},g=m,p=(t("b9ce"),t("cba8")),f=Object(p["a"])(g,a,o,!1,null,"e69e990a",null);r["default"]=f.exports},"46d0":function(e,r,t){},b9ce:function(e,r,t){"use strict";t("46d0")}}]);
//# sourceMappingURL=chunk-3badc866.bac19b9c.js.map