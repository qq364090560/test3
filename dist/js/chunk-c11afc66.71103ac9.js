(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c11afc66","chunk-6fbbd849","chunk-7c09a5b3"],{"10ee":function(e,t,r){},1885:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"addForm",staticClass:"demo-ruleForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"100px","hide-required-asterisk":""}},[r("el-form-item",{attrs:{label:"用户名称",prop:"userName"}},[r("el-input",{model:{value:e.addForm.userName,callback:function(t){e.$set(e.addForm,"userName",t)},expression:"addForm.userName"}})],1),"添加用户"==e.title?r("el-form-item",{attrs:{label:"登陆账号",prop:"account"}},[r("el-input",{model:{value:e.addForm.account,callback:function(t){e.$set(e.addForm,"account",t)},expression:"addForm.account"}})],1):e._e(),"添加用户"==e.title?r("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.addForm.pwd,callback:function(t){e.$set(e.addForm,"pwd",t)},expression:"addForm.pwd"}})],1):e._e(),r("el-form-item",{attrs:{label:"用户组",prop:"groupId"}},[r("el-cascader",{attrs:{options:e.ugOptions,props:e.ugProps,clearable:""},on:{change:e.handleChange},model:{value:e.addForm.groupId,callback:function(t){e.$set(e.addForm,"groupId",t)},expression:"addForm.groupId"}})],1),r("el-form-item",{attrs:{label:"联系电话",prop:"userMobile"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.userMobile,callback:function(t){e.$set(e.addForm,"userMobile",t)},expression:"addForm.userMobile"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"userEmail"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.userEmail,callback:function(t){e.$set(e.addForm,"userEmail",t)},expression:"addForm.userEmail"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.resetForm()}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("确 定")])],1)],1)},o=[],s=r("4ec3"),n={props:{dialogFormVisible:Boolean,title:"",rowData:{}},data:function(){var e=function(e,t,r){11!=t.length?r(new Error("请输入正确的电话")):r()};return{addForm:{userName:"",account:"",pwd:"",groupId:"",userEmail:"",userMobile:""},ugProps:{value:"ugId",label:"ugName",children:"child",checkStrictly:!0,expandTrigger:"hover"},ugOptions:[],rules:{userName:[{required:!0,message:"请输入账号",trigger:"blur"},{min:2,max:15,message:"请输入2到15的字符"}],account:[{required:!0,message:"请输入账号",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"请输入6到20的密码"}],groupId:[{required:!0,message:"请选择角色",trigger:"change"}],userEmail:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],userMobile:[{validator:e,trigger:"blur"}]}}},created:function(){var e=this,t=JSON.parse(sessionStorage.getItem("userInfo")).groupId;Object(s["H"])({groupId:t}).then((function(t){e.ugOptions=t.data}))},updated:function(){"编辑用户"==this.title&&(console.log(this.rowData),this.addForm=this.rowData)},methods:{handleChange:function(e){console.log(e),this.addForm.groupId=e[e.length-1]},submitForm:function(){var e=this;"添加用户"===this.title?this.$refs.addForm.validate((function(t){if(!t)return!1;var r=e.addForm;Object(s["h"])(r).then((function(t){e.$message({message:t.message,type:"success"}),e.resetForm(),e.$parent.getData()}))})):this.$refs.addForm.validate((function(t){if(!t)return!1;var r=e.addForm;Object(s["mb"])(r).then((function(t){e.$message({message:t.message,type:"success"}),e.resetForm(),e.$parent.getData()}))}))},resetForm:function(){this.$refs.addForm.resetFields(),this.$emit("closeDilog")}}},i=n,l=(r("2598"),r("cba8")),c=Object(l["a"])(i,a,o,!1,null,"1a974224",null);t["default"]=c.exports},2598:function(e,t,r){"use strict";r("6606")},"40a5":function(e,t,r){},6606:function(e,t,r){},9665:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("账号列表")]),r("el-button",{directives:[{name:"btnShow",rawName:"v-btnShow",value:"insert",expression:"'insert'"}],staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.addAccount}},[e._v("添加用户")])],1),r("el-table",{ref:"userTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{label:"用户名",width:"140",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.userName))]}}])}),r("el-table-column",{attrs:{label:"联系电话",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.userMobile))]}}])}),r("el-table-column",{attrs:{label:"登陆账号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.loginAccount))]}}])}),r("el-table-column",{attrs:{prop:"address",label:"邮箱",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.userEmail))]}}])}),r("el-table-column",{attrs:{label:"角色名称",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.roleName))]}}])}),r("el-table-column",{attrs:{label:"所属用户组",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.groupName))]}}])}),r("el-table-column",{attrs:{label:"所属组织",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.orgName))]}}])}),r("el-table-column",{attrs:{label:"上次登陆时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.lastLoginTime))]}}])}),r("el-table-column",{attrs:{label:"停用启用标识",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.deleteFlgm?"启用":"禁用"))]}}])}),r("el-table-column",{attrs:{label:"创建日期",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.createTime))]}}])}),r("el-table-column",{attrs:{label:"操作",width:"420",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"btnShow",rawName:"v-btnShow",value:"update",expression:"'update'"}],attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{size:"mini",type:t.row.deleteFlgm?"danger":"primary"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v(e._s(t.row.deleteFlgm?"禁用":"启用"))]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.setRole(t.$index,t.row)}}},[e._v("分配角色")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.resetPwd(t.$index,t.row)}}},[e._v("重置密码")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.changePwd(t.$index,t.row)}}},[e._v("修改密码")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("AccountAdd",{attrs:{dialogFormVisible:e.dialogFormVisible,title:e.title,rowData:e.rowData},on:{closeDilog:e.closeDilog}}),r("AccountPwd",{attrs:{pwdChange:e.pwdChange,rowData:e.rowData},on:{closeDilog:e.closeDilog}}),r("el-dialog",{attrs:{title:"分配角色",visible:e.visibleRole,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.visibleRole=t}}},[r("div",[e.radioArr.length?r("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},e._l(e.radioArr,(function(t,a){return r("el-radio",{key:a,staticStyle:{margin:"0 10px"},attrs:{label:t.rid}},[e._v(e._s(t.roleName))])})),1):r("div",[e._v("暂无数据")])],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.resetForm()}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("确 定")])],1)])],1)},o=[],s=(r("e5b4"),r("1885")),n=r("9f56"),i=r("4ec3"),l={components:{AccountAdd:s["default"],AccountPwd:n["default"]},data:function(){return{radio:"",radioArr:[],visibleRole:!1,pwdChange:!1,dialogFormVisible:!1,title:"",rowData:"",tableData:[],total:10,currentPage:1,pageSize:10}},methods:{resetForm:function(){this.visibleRole=!1},submitForm:function(){var e=this;if(this.radioArr.length){var t=this.radioArr.find((function(t){return t.rid==e.radio})),r={userId:this.rowData.userId,roleId:this.radio,userName:this.rowData.userName,roleName:t.roleName};Object(i["nb"])(r).then((function(t){e.resetForm()}))}},setRole:function(e,t){var r=this;console.log(t),Object(i["K"])({orgId:t.orgId}).then((function(e){r.radioArr=e.data})),this.rowData=t,this.visibleRole=!0},resetPwd:function(e,t){var r=this,a={account:t.loginAccount,userId:t.userId,userName:t.userName};Object(i["cb"])(a).then((function(e){r.$message({message:"重置成功，默认密码：123456",type:"success"})}))},changePwd:function(e,t){this.pwdChange=!0,this.rowData=t},closeDilog:function(){this.dialogFormVisible=!1,this.dialogEdit=!1,this.pwdChange=!1},addAccount:function(){this.dialogFormVisible=!0,this.title="添加用户"},handleEdit:function(e,t){this.dialogFormVisible=!0,this.title="编辑用户";var r=this.$common.deepClone(t);this.rowData=r},handleDelete:function(e,t){this.delData(t)},handleSizeChange:function(e){this.pageSize=e,this.getData()},handleCurrentChange:function(e){this.currentPage=e,this.getData()},getData:function(){var e=this,t=JSON.parse(sessionStorage.getItem("userInfo")).groupId;Object(i["L"])({groupId:t}).then((function(t){e.tableData=t.data,e.total=parseInt(t.data.length)}))},delData:function(e){var t=this;this.$confirm("此操作将 ".concat(e.deleteFlgm?"禁用":"启用","该用户, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var r={userId:e.userId,delFlag:e.deleteFlgm?0:1,userName:e.userName};Object(i["r"])(r).then((function(e){200==e.status?(t.$message({message:e.message,type:"success"}),t.getData()):t.$message.error(e.message)}))})).catch((function(){t.$message({type:"info",message:"已取消"})}))}},created:function(){this.getData()}},c=l,u=(r("f7eb"),r("cba8")),d=Object(u["a"])(c,a,o,!1,null,"9611b3b2",null);t["default"]=d.exports},"9f56":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"修改密码",visible:e.pwdChange,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.pwdChange=t}}},[r("el-form",{ref:"changeForm",staticClass:"demo-ruleForm",attrs:{model:e.changeForm,rules:e.rules,"label-width":"100px","hide-required-asterisk":""}},[r("el-form-item",{attrs:{label:"原密码",prop:"password"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.changeForm.password,callback:function(t){e.$set(e.changeForm,"password",t)},expression:"changeForm.password"}})],1),r("el-form-item",{attrs:{label:"新密码",prop:"newpass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.changeForm.newpass,callback:function(t){e.$set(e.changeForm,"newpass",t)},expression:"changeForm.newpass"}})],1),r("el-form-item",{attrs:{label:"确认新密码",prop:"checkpass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.changeForm.checkpass,callback:function(t){e.$set(e.changeForm,"checkpass",t)},expression:"changeForm.checkpass"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("确定")]),r("el-button",{on:{click:function(t){return e.resetForm()}}},[e._v("取消")])],1)],1)],1)},o=[],s=r("4ec3"),n={props:{pwdChange:Boolean,rowData:{}},data:function(){var e=this,t=function(t,r,a){r.length<6?a(new Error("请输入6位数以上的密码")):(e.$refs.changeForm.validateField("checkpass"),a())},r=function(t,r,a){r.length<6?a(new Error("请输入6位数以上的密码")):r!==e.changeForm.newpass?a(new Error("两次输入密码不一样")):r==e.changeForm.password?a(new Error("不能和旧密码一致")):a()};return{changeForm:{password:"",newpass:"",checkpass:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"请输入6到20的密码"}],newpass:[{validator:t,trigger:"blur"}],checkpass:[{validator:r,trigger:"blur"}]}}},methods:{submitForm:function(){var e=this;this.$refs.changeForm.validate((function(t){if(!t)return!1;var r={userId:e.rowData.userId,account:e.rowData.loginAccount,userName:e.rowData.userName,oriPwd:e.changeForm.password,newPwd:e.changeForm.newpass};Object(s["k"])(r).then((function(t){700==t.status?e.$message({message:t.message,type:"warning"}):(e.$message({message:"修改成功",type:"success"}),e.resetForm())}))}))},resetForm:function(){this.$refs.changeForm.resetFields(),this.$emit("closeDilog")}},created:function(){}},i=n,l=(r("e62d4"),r("cba8")),c=Object(l["a"])(i,a,o,!1,null,"124c973e",null);t["default"]=c.exports},e62d4:function(e,t,r){"use strict";r("10ee")},f7eb:function(e,t,r){"use strict";r("40a5")}}]);
//# sourceMappingURL=chunk-c11afc66.71103ac9.js.map