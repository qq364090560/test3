(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-038ce442"],{"589b":function(e,t,a){},6094:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"container"},[a("el-card",{staticClass:"left-card",staticStyle:{"margin-right":"10px"}},[a("div",{staticClass:"text item"},[a("el-row",[a("el-col",[a("h4",{staticStyle:{padding:"10px"}},[e._v("停车场序列")])]),a("el-col",[a("el-tree",{attrs:{data:e.treeData,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1)],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"total,prev, pager, next","current-page":e.page,"page-size":e.size,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),a("el-card",{staticClass:"left-card"},[a("div",{staticClass:"text item"},[a("el-row",[a("el-col",[a("el-row",[e.cardData.pId?a("el-col",{staticStyle:{padding:"0 5px"},attrs:{span:12}},[a("el-button",{directives:[{name:"btnShow",rawName:"v-btnShow",value:"insert",expression:"'insert'"}],staticClass:"headbtn",attrs:{type:"primary"},on:{click:function(t){e.drivewayVisible=!0}}},[e._v("添加")])],1):e._e()],1),a("el-row",[a("h4",{staticStyle:{padding:"10px"}},[e._v("通道序列")])])],1),a("el-col",{staticStyle:{margin:"10px 0"}},[a("el-tree",{attrs:{data:e.drivewayData,props:e.drivewayProps},on:{"node-click":e.drivewayClick}})],1)],1)],1)]),a("el-card",{staticClass:"right-card"},[e.editForm.drivewayName?a("div",[a("div",{staticClass:"clearfix",staticStyle:{"margin-bottom":"20px"},attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"18px"}},[e._v(e._s(e.editForm.drivewayName))])]),a("el-form",{ref:"editForm",staticClass:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"120px"}},[a("div",{staticStyle:{overflow:"auto"}},[a("el-form-item",[a("h1",{staticStyle:{"margin-bottom":"10px"}},[e._v("基本信息")])]),a("el-form-item",{attrs:{label:"通道名称",prop:"drivewayName"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.editForm.drivewayName,callback:function(t){e.$set(e.editForm,"drivewayName",t)},expression:"editForm.drivewayName"}})],1),a("el-form-item",{attrs:{label:"通道类型",prop:"drivewayType"}},[a("el-radio-group",{model:{value:e.editForm.drivewayType,callback:function(t){e.$set(e.editForm,"drivewayType",t)},expression:"editForm.drivewayType"}},[a("el-radio",{attrs:{label:1}},[e._v("单行入口")]),a("el-radio",{attrs:{label:2}},[e._v("单行出口")]),a("el-radio",{attrs:{label:3}},[e._v("双行出入")])],1)],1),a("el-form-item",{attrs:{label:"是否禁用",prop:"ptype"}},[a("el-radio-group",{model:{value:e.editForm.delFlag,callback:function(t){e.$set(e.editForm,"delFlag",t)},expression:"editForm.delFlag"}},[a("el-radio",{attrs:{label:0}},[e._v("停用")]),a("el-radio",{attrs:{label:1}},[e._v("启用")])],1)],1),a("el-form-item",[a("h1",{staticStyle:{"margin-bottom":"10px"}},[e._v("其他信息")])]),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),a("el-form-item",{attrs:{label:"控制器",prop:"controller"}},[a("div",[a("el-button",{directives:[{name:"btnShow",rawName:"v-btnShow",value:"insert",expression:"'insert'"}],attrs:{type:"primary"},on:{click:e.addController}},[e._v("添加控制器")]),a("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:e.getSetValue},model:{value:e.setValue,callback:function(t){e.setValue=t},expression:"setValue"}},e._l(e.setOptions,(function(e){return a("el-option",{key:e.sn,attrs:{label:e.wgName,value:e.sn}})})),1)],1),e._l(e.controller,(function(t){return a("el-tag",{key:t.sn,attrs:{closable:"","disable-transitions":"",effect:"dark"},on:{close:function(a){return e.tagClose(t)}}},[e._v("\n                "+e._s(t.wgName)+"\n              ")])}))],2),a("el-form-item",{attrs:{label:"人脸相机",prop:"controller"}},[a("div",[a("el-button",{directives:[{name:"btnShow",rawName:"v-btnShow",value:"insert",expression:"'insert'"}],attrs:{type:"primary"},on:{click:e.addFaceCamera}},[e._v("添加人脸相机")]),a("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:e.getFaceCamera},model:{value:e.setfaceCamera,callback:function(t){e.setfaceCamera=t},expression:"setfaceCamera"}},e._l(e.setCamera,(function(e){return a("el-option",{key:e.sn,attrs:{label:e.wgName,value:e.sn}})})),1)],1),e._l(e.faceCamera,(function(t){return a("el-tag",{key:t.sn,attrs:{closable:"","disable-transitions":"",effect:"dark"},on:{close:function(a){return e.tagClose(t)}}},[e._v("\n            "+e._s(t.wgName)+"\n          ")])}))],2),a("div",{staticClass:"saveBtn"},[a("el-button",{attrs:{type:"danger"},on:{click:e.onDel}},[e._v("彻底删除")]),a("el-button",{directives:[{name:"btnShow",rawName:"v-btnShow",value:"update",expression:"'update'"}],attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")])],1)],1)],1):a("div",[e._v("\n      请先选择通道\n    ")])]),a("el-dialog",{attrs:{title:"添加通道",visible:e.drivewayVisible},on:{"update:visible":function(t){e.drivewayVisible=t}}},[a("el-form",{ref:"addForm",staticClass:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"通道名称",prop:"drivewayName"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.addForm.drivewayName,callback:function(t){e.$set(e.addForm,"drivewayName",t)},expression:"addForm.drivewayName"}})],1),a("el-form-item",{attrs:{label:"通道类型",prop:"drivewayType"}},[a("el-radio-group",{model:{value:e.addForm.drivewayType,callback:function(t){e.$set(e.addForm,"drivewayType",t)},expression:"addForm.drivewayType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("单行入口")]),a("el-radio",{attrs:{label:"2"}},[e._v("单行出口")]),a("el-radio",{attrs:{label:"3"}},[e._v("双行出入")])],1)],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onClear}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onAdd}},[e._v("确 定")])],1)],1)],1)},i=[],s=(a("4890"),a("4ec3")),l={data:function(){return{controller:"",setValue:"",setOptions:[],newValue:{},setfaceCamera:"",setCamera:[],faceCamera:[],treeData:[],defaultProps:{children:"",label:"pName"},drivewayData:[],drivewayProps:{children:"",label:"drivewayName"},page:1,size:20,total:0,drivewayVisible:!1,addForm:{},rules:{drivewayName:[{required:!0,message:"请输入停车场名称",trigger:"blur"}],drivewayType:[{required:!0,message:"请选择停车场类型",trigger:"blur"}]},cardData:{},editForm:{},delFlag:""}},created:function(){this.getOrg()},methods:{test:function(e){console.log(e)},getOrg:function(){var e=this,t={groupId:JSON.parse(sessionStorage.getItem("userInfo")).groupId,page:this.page,size:this.size};Object(s["bb"])(t).then((function(t){e.treeData=t.data.list,e.total=t.data.count}))},handleSizeChange:function(e){this.size=e,this.getOrg()},handleCurrentChange:function(e){this.page=e,this.getOrg()},onDel:function(){var e=this;this.$confirm("请确认是否删除此通道？确认后将清除所有此通道相关内容！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={drivewayName:e.editForm.drivewayName,drivewayId:e.editForm.drivewayId};Object(s["v"])(t).then((function(t){200==t.status&&(e.$message({type:"success",message:"删除成功"}),e.getDriveway(),e.editForm={})}))})).catch((function(){e.$message({type:"info",message:"已取消"})}))},onSave:function(){var e=this,t={drivewayId:this.editForm.drivewayId,drivewayName:this.editForm.drivewayName,drivewayType:this.editForm.drivewayType,delFlag:this.editForm.delFlag,remark:this.editForm.remark};Object(s["y"])(t).then((function(t){e.$message({type:"success",message:"修改成功"}),e.getDriveway()}))},onClear:function(){this.$refs.addForm.resetFields(),this.drivewayVisible=!1},onAdd:function(){var e=this,t={parkingLotId:this.cardData.pId,drivewayName:this.addForm.drivewayName,drivewayType:this.addForm.drivewayType,remark:this.addForm.remark};Object(s["w"])(t).then((function(t){e.$refs.addForm.resetFields(),e.drivewayVisible=!1,e.getDriveway()}))},handleNodeClick:function(e){var t=this;this.cardData=e,this.getDriveway(),Object(s["G"])().then((function(e){t.setOptions=e.data}))},getDriveway:function(){var e=this;Object(s["x"])({park:this.cardData.pId}).then((function(t){e.drivewayData=t.data}))},drivewayClick:function(e){var t=this.$common.deepClone(e);this.editForm=t,this.controller=t.controllers},tagClose:function(e){var t=this;this.$confirm("确定删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={drivewayId:t.editForm.drivewayId,drivewayName:t.editForm.drivewayName,wgName:e.wgName,sn:e.sn};Object(s["l"])(a).then((function(e){200==e.status?(t.$message({type:"success",message:"已删除"}),t.getDriveway(),t.editForm={},t.setValue=""):t.$message.error(e.message)}))})).catch((function(){t.$message({type:"info",message:"已取消"})}))},getSetValue:function(e){this.newValue=this.setOptions.filter((function(t){return t.sn==e}))[0]},addFaceCamera:function(){},getFaceCamera:function(e){},addController:function(){var e=this;if(this.setValue){var t={drivewayId:this.editForm.drivewayId,drivewayName:this.editForm.drivewayName,sn:this.newValue.sn,wgName:this.newValue.wgName};Object(s["i"])(t).then((function(t){(t.status=200)?(e.$message({type:"success",message:"添加成功"}),e.getDriveway(),e.editForm={},e.setValue=""):e.$message.error(t.message)}))}else this.$message.error("请先选择控制器")}}},o=l,n=(a("a35d"),a("cba8")),d=Object(n["a"])(o,r,i,!1,null,"3f70fd61",null);t["default"]=d.exports},a35d:function(e,t,a){"use strict";a("589b")}}]);
//# sourceMappingURL=chunk-038ce442.00349acd.js.map